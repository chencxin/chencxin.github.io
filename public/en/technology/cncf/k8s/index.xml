<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>K8S on athena</title>
    <link>http://athena-book.dns.qihoo.net/en/technology/cncf/k8s/</link>
    <description>Recent content in K8S on athena</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 25 Feb 2021 15:39:35 +0800</lastBuildDate><atom:link href="http://athena-book.dns.qihoo.net/en/technology/cncf/k8s/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>私有镜像仓库</title>
      <link>http://athena-book.dns.qihoo.net/en/technology/cncf/k8s/private-registry/</link>
      <pubDate>Thu, 25 Feb 2021 15:41:28 +0800</pubDate>
      
      <guid>http://athena-book.dns.qihoo.net/en/technology/cncf/k8s/private-registry/</guid>
      <description>1、创建 SERVER=hub.dns.360.cn USER=dns EMAIL=yinqiwei@360.cn PW=xxxxxxxx kubectl create secret docker-registry regcred \  --docker-server=$SERVER \  --docker-username=$USER \  --docker-password=$PW \  --docker-email=$EMAIL 或者从文件创建：
kubectl create secret generic regcred --from-file=.dockerconfigjson=/home/yinqiwei/.docker/config.json --type=kubernetes.io/dockerconfigjson 查看：
kubectl get secret regcred --output=yaml 2、应用 添加secret到serviceaccount:
kubectl patch serviceaccount default -p &amp;#39;{&amp;#34;imagePullSecrets&amp;#34;: [{&amp;#34;name&amp;#34;: &amp;#34;regcred&amp;#34;}]}&amp;#39; 添加到默认的sa后整个namespace将默认有拉取权限，pod默认使用sa 是default
针对单个pod也能添加：
apiVersion: v1 kind: Pod metadata: name: private-reg spec: containers: - name: private-reg-container image: &amp;lt;your-private-image&amp;gt; imagePullSecrets: - name: regcred </description>
    </item>
    
  </channel>
</rss>
